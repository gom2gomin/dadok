<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.choongang.s202350103.NewBookMapper">
	
	<select id="gbSelectInNbCnt" resultType="int">
		SELECT count(*) FROM newbook WHERE nb_category1 = 1
	</select>
	
	<select id="gbSelectInNbList" parameterType="NewBook" resultType="NewBook">
		SELECT nb_num, nb_title, nb_price, nb_writer, nb_publisher, TO_CHAR(nb_publi_date, 'YYYY-MM-DD') as nb_publi_date, 
			   nb_category1, nb_category2, nb_image
		FROM (
				SELECT rownum rn, nb.*
				FROM newbook nb
				WHERE nb_category1 = 1
				ORDER BY nb_publi_date desc
			) 
		WHERE rn BETWEEN #{start} AND #{end}
	</select>
</mapper>